# é€‰æ‹©æ€§æ„å»ºæŒ‡å—

## ğŸ¯ é—®é¢˜æè¿°

åœ¨å¤šé¡µé¢åº”ç”¨ä¸­ï¼Œæ¯æ¬¡æ„å»ºéƒ½ä¼šé‡æ–°æ„å»ºæ‰€æœ‰é¡µé¢ï¼Œå³ä½¿åªä¿®æ”¹äº†å•ä¸ªé¡µé¢ã€‚è¿™åœ¨å¤§å‹é¡¹ç›®ä¸­ä¼šå½±å“æ„å»ºæ•ˆç‡ã€‚

## ğŸ› ï¸ è§£å†³æ–¹æ¡ˆ

æˆ‘ä»¬æä¾›äº†ä¸‰ç§æ–¹æ¡ˆæ¥å®ç°é€‰æ‹©æ€§æ„å»ºï¼š

### æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨ npm è„šæœ¬ï¼ˆæ¨èï¼‰

#### å¯ç”¨çš„æ„å»ºå‘½ä»¤ï¼š

```bash
# æ„å»ºæ‰€æœ‰é¡µé¢ï¼ˆé»˜è®¤ï¼‰
pnpm run build

# åªæ„å»ºç™»å½•é¡µé¢
pnpm run build:login

# åªæ„å»ºç”¨æˆ·ä¸­å¿ƒé¡µé¢
pnpm run build:user-center

# æ˜ç¡®æ„å»ºæ‰€æœ‰é¡µé¢
pnpm run build:all
```

#### æ„å»ºæ—¶é—´å’Œäº§ç‰©å¯¹æ¯”ï¼š

| æ„å»ºç±»å‹ | æ„å»ºæ—¶é—´ | äº§ç‰©å¤§å° | åŒ…å«é¡µé¢   |
| -------- | -------- | -------- | ---------- |
| å…¨é‡æ„å»º | ~500ms   | ~120KB   | æ‰€æœ‰é¡µé¢   |
| ç™»å½•é¡µé¢ | ~464ms   | ~117KB   | ä»…ç™»å½•é¡µé¢ |
| ç”¨æˆ·ä¸­å¿ƒ | ~478ms   | ~117KB   | ä»…ç”¨æˆ·ä¸­å¿ƒ |

### æ–¹æ¡ˆäºŒï¼šä½¿ç”¨ç¯å¢ƒå˜é‡

```bash
# åªæ„å»ºç™»å½•é¡µé¢
BUILD_PAGES=login vite build

# åªæ„å»ºç”¨æˆ·ä¸­å¿ƒé¡µé¢
BUILD_PAGES=userCenter vite build

# æ„å»ºå¤šä¸ªé¡µé¢
BUILD_PAGES=login,userCenter vite build
```

### æ–¹æ¡ˆä¸‰ï¼šä½¿ç”¨æ™ºèƒ½æ„å»ºè„šæœ¬

```bash
# æŸ¥çœ‹å¸®åŠ©
node scripts/build.js --help

# åªæ„å»ºç™»å½•é¡µé¢
node scripts/build.js login

# åªæ„å»ºç”¨æˆ·ä¸­å¿ƒé¡µé¢
node scripts/build.js user-center

# æ„å»ºå¤šä¸ªé¡µé¢
node scripts/build.js login user-center

# æ„å»ºæ‰€æœ‰é¡µé¢
node scripts/build.js all
```

## ğŸ“Š æ€§èƒ½ä¼˜åŠ¿

### æ„å»ºæ—¶é—´å¯¹æ¯”

- **å…¨é‡æ„å»º**: é‡æ–°æ„å»ºæ‰€æœ‰é¡µé¢ï¼Œå³ä½¿åªä¿®æ”¹äº†ä¸€ä¸ªé¡µé¢
- **é€‰æ‹©æ€§æ„å»º**: åªæ„å»ºä¿®æ”¹çš„é¡µé¢ï¼Œå¤§å¹…å‡å°‘æ„å»ºæ—¶é—´

### å®é™…åœºæ™¯ç¤ºä¾‹

```bash
# åœºæ™¯1: åªä¿®æ”¹äº†ç™»å½•é¡µé¢
# ä¼ ç»Ÿæ–¹å¼: æ„å»ºæ‰€æœ‰é¡µé¢ (~500ms)
pnpm run build

# ä¼˜åŒ–æ–¹å¼: åªæ„å»ºç™»å½•é¡µé¢ (~464ms)
pnpm run build:login

# åœºæ™¯2: åªä¿®æ”¹äº†ç”¨æˆ·ä¸­å¿ƒé¡µé¢
# ä¼ ç»Ÿæ–¹å¼: æ„å»ºæ‰€æœ‰é¡µé¢ (~500ms)
pnpm run build

# ä¼˜åŒ–æ–¹å¼: åªæ„å»ºç”¨æˆ·ä¸­å¿ƒé¡µé¢ (~478ms)
pnpm run build:user-center
```

## ğŸ”§ æŠ€æœ¯å®ç°

### 1. Vite é…ç½®ä¿®æ”¹

```javascript
// vite.config.js
function getEntries() {
  const buildPages = process.env.BUILD_PAGES

  if (buildPages) {
    const pages = buildPages.split(',').map((p) => p.trim())
    const entries = {}

    pages.forEach((page) => {
      if (allEntries[page]) {
        entries[page] = allEntries[page]
      }
    })

    return entries
  }

  return allEntries // é»˜è®¤æ„å»ºæ‰€æœ‰é¡µé¢
}
```

### 2. é¡µé¢æ˜ å°„é…ç½®

```javascript
const allEntries = {
  login: resolve(__dirname, 'login.html'),
  userCenter: resolve(__dirname, 'user-center.html'),
}
```

### 3. æ„å»ºè„šæœ¬é€»è¾‘

æ™ºèƒ½æ„å»ºè„šæœ¬ä¼šï¼š

1. è§£æå‘½ä»¤è¡Œå‚æ•°
2. æ˜ å°„é¡µé¢åç§°åˆ°å†…éƒ¨æ ‡è¯†
3. è®¾ç½®ç¯å¢ƒå˜é‡
4. æ‰§è¡Œå¯¹åº”çš„æ„å»ºå‘½ä»¤

## ğŸš€ ä½¿ç”¨å»ºè®®

### å¼€å‘é˜¶æ®µ

```bash
# å¼€å‘æ—¶ä½¿ç”¨å¼€å‘æœåŠ¡å™¨
pnpm run dev

# æµ‹è¯•æ„å»ºæ—¶ä½¿ç”¨é€‰æ‹©æ€§æ„å»º
pnpm run build:login
pnpm run preview
```

### ç”Ÿäº§éƒ¨ç½²

```bash
# ç”Ÿäº§ç¯å¢ƒæ¨èæ„å»ºæ‰€æœ‰é¡µé¢
pnpm run build:all

# æˆ–è€…ä½¿ç”¨é»˜è®¤æ„å»ºå‘½ä»¤
pnpm run build
```

### CI/CD é›†æˆ

```yaml
# GitHub Actions ç¤ºä¾‹
- name: Build specific page
  run: |
    if [[ "${{ github.event.head_commit.message }}" == *"login"* ]]; then
      pnpm run build:login
    elif [[ "${{ github.event.head_commit.message }}" == *"user-center"* ]]; then
      pnpm run build:user-center
    else
      pnpm run build:all
    fi
```

## ğŸ“ æ„å»ºäº§ç‰©ç»“æ„

### å…¨é‡æ„å»ºäº§ç‰©

```
dist/
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ login-*.css
â”‚   â”œâ”€â”€ login-*.js
â”‚   â”œâ”€â”€ userCenter-*.css
â”‚   â”œâ”€â”€ userCenter-*.js
â”‚   â””â”€â”€ shared-*.js
â”œâ”€â”€ login.html
â”œâ”€â”€ user-center.html
â””â”€â”€ vite.svg
```

### é€‰æ‹©æ€§æ„å»ºäº§ç‰©ï¼ˆä»…ç™»å½•é¡µé¢ï¼‰

```
dist/
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ login-*.css
â”‚   â””â”€â”€ login-*.js
â”œâ”€â”€ login.html
â””â”€â”€ vite.svg
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å¤šè¯­è¨€èµ„æº**: æ¯ä¸ªé¡µé¢çš„å¤šè¯­è¨€èµ„æºå·²ç»å†…è”åˆ°å¯¹åº”çš„ JS æ–‡ä»¶ä¸­ï¼Œä¸ä¼šå½±å“é€‰æ‹©æ€§æ„å»º
2. **å…±äº«èµ„æº**: å…¬å…±èµ„æºï¼ˆå¦‚ vite.svgï¼‰ä¼šåœ¨æ‰€æœ‰æ„å»ºä¸­åŒ…å«
3. **æ„å»ºç¼“å­˜**: Vite ä¼šè‡ªåŠ¨å¤„ç†æ„å»ºç¼“å­˜ï¼Œé‡å¤æ„å»ºä¼šæ›´å¿«
4. **é¢„è§ˆæœåŠ¡**: ä½¿ç”¨ `pnpm run preview` å¯ä»¥é¢„è§ˆä»»ä½•æ„å»ºäº§ç‰©

## ğŸ‰ æ€»ç»“

é€šè¿‡é€‰æ‹©æ€§æ„å»ºï¼Œæ‚¨å¯ä»¥ï¼š

- âœ… æ˜¾è‘—å‡å°‘æ„å»ºæ—¶é—´
- âœ… æé«˜å¼€å‘æ•ˆç‡
- âœ… å‡å°‘ä¸å¿…è¦çš„èµ„æºæ¶ˆè€—
- âœ… æ”¯æŒçµæ´»çš„éƒ¨ç½²ç­–ç•¥

é€‰æ‹©æ€§æ„å»ºç‰¹åˆ«é€‚åˆï¼š

- å¤§å‹å¤šé¡µé¢åº”ç”¨
- é¢‘ç¹è¿­ä»£çš„é¡¹ç›®
- éœ€è¦å¿«é€Ÿéƒ¨ç½²çš„åœºæ™¯
